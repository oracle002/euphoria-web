{"version":3,"file":"5-2rCvT3Rz.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(admin)/beprofessional/admin/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/5.js"],"sourcesContent":["import { a as client } from \"../../../../../chunks/connection.js\";\nimport { r as redirect } from \"../../../../../chunks/index.js\";\nconst load = async ({ url, depends }) => {\n  depends(\"database\");\n  let pageNumber = Number(url.searchParams.get(\"page\")) || 0;\n  let limit = Number(url.searchParams.get(\"limit\") || 10);\n  if (limit < 0)\n    limit = 10;\n  const count = await client.event_participants.count({\n    where: {\n      verified: false\n    }\n  });\n  if (pageNumber > Math.ceil(count / limit)) {\n    pageNumber = Math.ceil(count / limit);\n  }\n  if (pageNumber < 1)\n    pageNumber = 1;\n  let participations = await client.event_participants.findMany({\n    take: limit,\n    include: {\n      participant: true,\n      event_payment: true\n    },\n    skip: (pageNumber - 1) * limit,\n    orderBy: {\n      created_at: \"asc\"\n    },\n    where: {\n      verified: false\n    }\n  });\n  participations = participations.map((p) => {\n    delete p.participant.password;\n    return p;\n  });\n  return {\n    participations,\n    pageNumber,\n    limit,\n    count\n  };\n};\nconst actions = {\n  verify: async ({ request, locals }) => {\n    try {\n      const data = await request.formData();\n      const participation_id = Number(data.get(\"participationId\"));\n      if (!participation_id) {\n        return {\n          success: false\n        };\n      }\n      const res = await client.event_participants.update({\n        where: {\n          event_participant_id: participation_id\n        },\n        data: {\n          verified: true\n        }\n      });\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.log(error);\n      return {\n        success: false\n      };\n    }\n  },\n  logout: async ({ cookies }) => {\n    cookies.delete(\"admin\", {\n      path: \"/\",\n      httpOnly: true,\n      sameSite: \"strict\",\n      secure: false,\n      //TODO : to be changed,\n      maxAge: 60 * 60 * 24 * 3\n    });\n    throw redirect(302, \"/\");\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/(admin)/beprofessional/admin/_page.server.ts.js';\n\nexport const index = 5;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/(admin)/beprofessional/admin/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/(admin)/beprofessional/admin/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/5.zOHFSRJD.js\",\"_app/immutable/chunks/scheduler.dz8I3iaA.js\",\"_app/immutable/chunks/index.BP1vhqCy.js\",\"_app/immutable/chunks/each.E09WHYhr.js\",\"_app/immutable/chunks/index.r_n6alX8.js\",\"_app/immutable/chunks/index.DB8Jo1Ze.js\",\"_app/immutable/chunks/index.DbGQmkCI.js\",\"_app/immutable/chunks/table-row.SiF9UxR7.js\",\"_app/immutable/chunks/index.C3YsWl5L.js\",\"_app/immutable/chunks/Icon.BDfCY7FR.js\",\"_app/immutable/chunks/events.z-Wf44Zc.js\",\"_app/immutable/chunks/entry.BAKMHLdN.js\",\"_app/immutable/chunks/index.3pc7-n2X.js\",\"_app/immutable/chunks/index.BUDEjfi1.js\",\"_app/immutable/chunks/check.KoSura-i.js\",\"_app/immutable/chunks/create.BQ-Ir3Gq.js\",\"_app/immutable/chunks/_commonjsHelpers.BosuxZz1.js\",\"_app/immutable/chunks/x.yxnTnJkM.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}